<!-- HTML header for doxygen 1.11.0-->
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta name="robots" content="noindex"/>
<script type="text/javascript">
  !function () {
    var currentHost = window.location.hostname;
    var currentPath = window.location.pathname;
    if (currentHost === 'meshinspector.github.io' && !currentPath.includes('/MeshLib/dev/')) {
      var newPath = currentPath.replace('/MeshLib/html', '/documentation');
      var newURL = 'https://meshlib.io' + newPath + window.location.search + window.location.hash;
      window.location.replace(newURL);
    }
  }();
</script>
<script>
  !function(){var i="analytics",analytics=window[i]=window[i]||[];if(!analytics.initialize)if(analytics.invoked)window.console&&console.error&&console.error("Segment snippet included twice.");else{analytics.invoked=!0;analytics.methods=["trackSubmit","trackClick","trackLink","trackForm","pageview","identify","reset","group","track","ready","alias","debug","page","screen","once","off","on","addSourceMiddleware","addIntegrationMiddleware","setAnonymousId","addDestinationMiddleware","register"];analytics.factory=function(e){return function(){if(window[i].initialized)return window[i][e].apply(window[i],arguments);var n=Array.prototype.slice.call(arguments);if(["track","screen","alias","group","page","identify"].indexOf(e)>-1){var c=document.querySelector("link[rel='canonical']");n.push({__t:"bpc",c:c&&c.getAttribute("href")||void 0,p:location.pathname,u:location.href,s:location.search,t:document.title,r:document.referrer})}n.unshift(e);analytics.push(n);return analytics}};for(var n=0;n<analytics.methods.length;n++){var key=analytics.methods[n];analytics[key]=analytics.factory(key)}analytics.load=function(key,n){var t=document.createElement("script");t.type="text/javascript";t.async=!0;t.setAttribute("data-global-segment-analytics-key",i);t.src="https://cdn.segment.com/analytics.js/v1/" + key + "/analytics.min.js";var r=document.getElementsByTagName("script")[0];r.parentNode.insertBefore(t,r);analytics._loadOptions=n};analytics._writeKey="Fi7y6F1GgFvTTomYo8zvETBoGHkDDxGx";;analytics.SNIPPET_VERSION="5.2.0";
  analytics.load("Fi7y6F1GgFvTTomYo8zvETBoGHkDDxGx");
  analytics.page();
  }}();
</script>
<!-- Google Tag Manager -->
<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
  new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
  j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
  'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
  })(window,document,'script','dataLayer','GTM-MBPLX27B');</script>
  <!-- End Google Tag Manager -->
<!-- No Index Part -->
 <meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.11.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>MeshLib Documentation: Float vs Double</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<script type="text/javascript" src="clipboard.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="cookie.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  extensions: ["tex2jax.js"],
  jax: ["input/TeX","output/HTML-CSS"],
});
</script>
<script type="text/javascript" async="async" src="https://cdn.jsdelivr.net/npm/mathjax@2/MathJax.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
<link href="CustomStyle.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only.css" rel="stylesheet" type="text/css"/>
<link href="doxygen-awesome-sidebar-only-darkmode-toggle.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="doxygen-awesome-darkmode-toggle.js"></script>
<script type="text/javascript">
    DoxygenAwesomeDarkModeToggle.init()
</script>
<script type="text/javascript" src="doxygen-awesome-interactive-toc.js"></script>
<script type="text/javascript">
    DoxygenAwesomeInteractiveToc.init()
</script>
<script type="text/javascript" src="doxygen-awesome-tabs.js"></script>
<script type="text/javascript">
    DoxygenAwesomeTabs.init()
</script>
</head>
<body>
<!-- Google Tag Manager (noscript) -->
<noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-MBPLX27B"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager (noscript) -->
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><a href="https://meshlib.io/"><img alt="Logo" src="favicon.ico"/></a></td>
  <td id="projectalign">
   <div id="projectname">MeshLib Documentation
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.11.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() { codefold.init(0); });
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search',true);
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function(){initNavTree('FloatVSDouble.html',''); initResizable(true); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div><div class="header">
  <div class="headertitle"><div class="title">Float vs Double</div></div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><li class="level1"><a href="#autotoc_md69">Float vs Double: A Design Choice for Precision and Performance in C++</a><ul><li class="level2"><a href="#autotoc_md70">Precision vs. Performance: Key Considerations</a><ul><li class="level3"><a href="#autotoc_md71">Precision</a></li>
<li class="level3"><a href="#autotoc_md72">Performance and Memory</a><ul><li class="level4"><a href="#autotoc_md73">Processing Speed:</a></li>
<li class="level4"><a href="#autotoc_md74">Memory Consumption:</a></li>
</ul>
</li>
<li class="level3"><a href="#autotoc_md75">Algorithm Compatibility</a></li>
</ul>
</li>
<li class="level2"><a href="#autotoc_md76">Design Philosophy in MeshLib</a></li>
<li class="level2"><a href="#autotoc_md77">Case Studies: Applications in Practice</a><ul><li class="level3"><a href="#autotoc_md78">Mesh Simplification (Decimation)</a></li>
<li class="level3"><a href="#autotoc_md79">Geopositioned Terrain Data</a></li>
<li class="level3"><a href="#autotoc_md80">Boolean operations on meshes: union, intersection, difference.</a></li>
</ul>
</li>
<li class="level2"><a href="#autotoc_md81">Conclusion</a></li>
</ul>
</li>
</ul>
</div>
<div class="textblock"><h1><a class="anchor" id="autotoc_md69"></a>
Float vs Double: A Design Choice for Precision and Performance in C++</h1>
<p>In computational geometry and graphics, the decision to use single-precision (float, 32-bit) or double-precision (double, 64-bit) data types can significantly impact the performance, memory usage, and precision of your application. In C++, these types are critical for representing point coordinates in structures like clouds, lines, or meshes. This article examines the trade-offs between float and double and explains the design rationale in the context of the MeshLib library.</p>
<h2><a class="anchor" id="autotoc_md70"></a>
Precision vs. Performance: Key Considerations</h2>
<h3><a class="anchor" id="autotoc_md71"></a>
Precision</h3>
<ul>
<li>double provides approximately <b>15 significant decimal digits</b>, compared to float, which offers <b>7 significant decimal digits</b>.</li>
<li>This enhanced precision is vital in scenarios requiring high accuracy, such as solving large systems of linear equations or representing geospatial data.</li>
</ul>
<h3><a class="anchor" id="autotoc_md72"></a>
Performance and Memory</h3>
<h4><a class="anchor" id="autotoc_md73"></a>
Processing Speed:</h4>
<ul>
<li>While the CPU handles double-precision arithmetic at a modest slowdown (e.g., 10-50% slower than single-precision), the GPU impact is far greater. On CUDA-enabled GPUs, double-precision arithmetic can be <b>orders of magnitude slower</b> or even unsupported on certain hardware.</li>
<li><b>Memory Bandwidth:</b> Doubles take <b>twice as long</b> to transfer between the processor and memory compared to floats, reducing the likelihood of cache hits and further slowing computation.</li>
</ul>
<h4><a class="anchor" id="autotoc_md74"></a>
Memory Consumption:</h4>
<ul>
<li>Doubles consume <b>twice the memory</b> of floats, which is particularly significant in memory-constrained environments such as <b>32-bit WebAssembly applications</b> or <b>high-performance GPUs with limited memory</b>.</li>
</ul>
<h3><a class="anchor" id="autotoc_md75"></a>
Algorithm Compatibility</h3>
<p>Algorithms written for float can often be straightforwardly adapted to double. However, converting double-precision algorithms to single-precision may lead to precision errors, particularly in computations with accumulated rounding errors or high dynamic range requirements.</p>
<h2><a class="anchor" id="autotoc_md76"></a>
Design Philosophy in MeshLib</h2>
<p>The design of MeshLib aims to balance precision and performance, leveraging the strengths of both float and double where they are most appropriate:</p>
<ol type="1">
<li><b>Template-Based Fundamental Structures</b><ul>
<li>Core data structures like Vector3 and Matrix3, as well as fundamental algorithms (e.g., distance calculations), are implemented as C++ templates. This allows them to be instantiated with both float and double, offering flexibility for different use cases.</li>
</ul>
</li>
<li><b>Specialized Templates for Complex Objects</b><ul>
<li>Advanced geometric structures such as Polyline are also templated, enabling developers to choose precision based on the application.</li>
</ul>
</li>
<li><b>Standardized Use of Floats</b><ul>
<li>Key data structures, such as <b>point clouds</b> and <b>meshes</b>, store coordinates using float. This ensures optimal performance and simplifies development, particularly for:<ul>
<li><b>CUDA integration</b>, where single-precision computations are faster and more widely supported.</li>
<li><b>WebAssembly (WASM)</b> applications, where memory usage is a critical constraint.</li>
</ul>
</li>
</ul>
</li>
<li><b>Precision-Intensive Algorithms</b><ul>
<li>For algorithms requiring higher precision, such as the <b>Laplacian Deformer</b>, intermediate computations are performed in double-precision, and the results are converted back to single-precision for storage.</li>
</ul>
</li>
</ol>
<h2><a class="anchor" id="autotoc_md77"></a>
Case Studies: Applications in Practice</h2>
<h3><a class="anchor" id="autotoc_md78"></a>
Mesh Simplification (Decimation)</h3>
<ul>
<li>Testing revealed that double-precision versions of simplification algorithms are:<ul>
<li><b>15% slower</b> than their single-precision counterparts.</li>
<li>Consume significantly more memory.</li>
<li>Show <b>no measurable improvement</b> in the quality of results.</li>
</ul>
</li>
<li><b>Conclusion:</b> Floats are the clear choice for this application, prioritizing speed and memory efficiency.</li>
</ul>
<h3><a class="anchor" id="autotoc_md79"></a>
Geopositioned Terrain Data</h3>
<ul>
<li>Terrain meshes and point clouds often use absolute geo-coordinates, which share up to <b>5 significant digits</b> among points. This exceeds the precision limit of floats.</li>
<li><b>Solution:</b> The library preprocesses such data by:<ul>
<li>Applying a global shift to the reference frame.</li>
<li>Storing points relative to the shifted origin, ensuring sufficient precision for single-precision representation.</li>
</ul>
</li>
<li>This approach maintains compatibility with floats while preserving accuracy.</li>
</ul>
<h3><a class="anchor" id="autotoc_md80"></a>
Boolean operations on meshes: union, intersection, difference.</h3>
<p>These operations in their core depend on fundamental predicates like Triangle-Segment intersection. And although the computation of the predicates can be inaccurate in float-arithmetic (e. g. return “intersection” when there is none) due to rounding errors, the computation in <b>double-arithmetic just reduces the probability of inaccuracies</b>, but it does not eliminate them at all. And if input to Boolean operations is degenerate like exactly coinciding triangles, both float and double computations will have the same issues. That is why <b>MeshLib utilizes intermediate conversion of point coordinates into integers</b>, and performs evaluation of predicates in integer numbers as well, <b>where no inaccuracies are possible</b>. On top of that, <b>Simulation-of-Simplicity (SoS)</b> approach is utilized to avoid numerous corner-cases, otherwise extremely hard to tackle correctly. </p><dl class="section note"><dt>Note</dt><dd>In the example of a triangle and a segment, SoS ensures that they can either intersect or not-intersect, but never just touch one another.</dd></dl>
<h2><a class="anchor" id="autotoc_md81"></a>
Conclusion</h2>
<p>The decision between float and double depends on the specific requirements of the application. While double excels in scenarios demanding high precision, float often provides better performance, lower memory usage, and easier compatibility with platforms like CUDA and WASM.</p>
<p>MeshLib adopts a balanced strategy:</p><ul>
<li><b>Floats</b> are the default for most data structures, prioritizing performance and memory efficiency.</li>
<li><b>Doubles</b> are selectively employed for precision-critical algorithms, ensuring accuracy where needed without compromising the overall system's efficiency.</li>
</ul>
<p>This design allows MeshLib to meet diverse application requirements while maintaining a high standard of performance and usability. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- HTML footer for doxygen 1.11.0-->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated by <a rel="nofollow" href="https://www.doxygen.nl/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.11.0 </li>
  </ul>
</div>
</body>
</html>
