from meshlib import mrmeshpy as mm

coords = [
    12.374342918395996, -8.568268775939941, 4.713981628417969,
    12.356268882751465, -9.726734161376953, 4.778738498687744,
    11.647807121276855, -11.520567893981934, 4.8898844718933105,
    10.640680313110352, -13.658771514892578, 5.503952980041504,
    8.986296653747559, -14.89557933807373, 4.826672077178955,
    7.0328264236450195, -17.72704315185547, 5.100575923919678,
    5.3157148361206055, -18.36249542236328, 5.662057876586914,
    2.562943696975708, -18.567134857177734, 5.638067245483398,
    -1.127899169921875, -18.045665740966797, 4.976574420928955,
    -4.701169013977051, -16.834407806396484, 5.414785385131836,
    -8.431866645812988, -15.273381233215332, 4.947081565856934,
    -11.342529296875, -13.267176628112793, 4.123119831085205,
    -11.906951904296875, -12.8923921585083, 4.516324520111084,
    -10.328729629516602, -11.59301471710205, 4.1317572593688965,
    -6.037509918212891, -11.114469528198242, 5.60826301574707,
    -0.2249613255262375, -10.612106323242188, 6.917881011962891,
    5.970120906829834, -8.145326614379883, 6.2469563484191895,
    10.712018013000488, -8.319670677185059, 5.378563404083252,
    12.374342918395996, -8.568268775939941, 4.713981628417969
]

mesh = mm.loadMesh("../_assets/upper.stl")

contour = mm.Contour3f()
for i in range(0, len(coords), 3):
    contour.append(mm.Vector3f(coords[i], coords[i+1], coords[i+2]))

cut_result = mm.cutMeshByContour(mesh, contour)

left_mesh = mesh.cloneRegion(cut_result)
right_mesh = mesh.cloneRegion(mesh.topology.getValidFaces() - cut_result)

saveL = mm.saveMesh(left_mesh, "left_part.stl")
saveR = mm.saveMesh(right_mesh, "right_part.stl")
